{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useChatStore}from\"../store/useChatStore\";import SidebarSkeleton from\"./Skeletons/SidebarSkeleton\";import{Users}from\"lucide-react\";import{useAuthStore}from\"../store/useAuthStore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sidebar=()=>{const{getUsers,users,selectedUser,setSelectedUser,isUsersLoading}=useChatStore();const{onlineUsers}=useAuthStore();const[showOnlineOnly,setShowOnlineOnly]=useState(false);useEffect(()=>{getUsers();},[getUsers]);const filteredUsers=showOnlineOnly?users.filter(user=>onlineUsers.includes(user._id)):users;if(isUsersLoading)return/*#__PURE__*/_jsx(SidebarSkeleton,{});return/*#__PURE__*/_jsxs(\"aside\",{className:\"h-full w-20 lg:w-72 border-r border-base-300 flex flex-col transition-all duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-base-300 w-full p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium hidden lg:block\",children:\"Chats\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 hidden lg:flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"cursor-pointer flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:showOnlineOnly,onChange:e=>setShowOnlineOnly(e.target.checked),className:\"form-checkbox h-5 w-5 text-base-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-base-400\",children:\"Show online only\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-zinc-500\",children:[\"(\",onlineUsers.length-1,\" online)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-y-auto w-full py-3\",children:[filteredUsers.map(user=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setSelectedUser(user),className:\"\\n                        w-full p-3 flex items-center gap-3 hover:bg-base-300 transition-colors \\n                        \".concat((selectedUser===null||selectedUser===void 0?void 0:selectedUser._id)===user._id?\"bg-base-300 ring-1 ring-base-300\":\"\",\"'}\\n                    \"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mx-auto lg:mx-0\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture||\"logo192.png\",alt:user.name,className:\"size-12 object-cover rounded-full\"}),onlineUsers.includes(user._id)&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full ring-2 ring-zinc-900\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden lg:block text-left min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium truncate\",children:user.fullName}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-zinc-400\",children:onlineUsers.includes(user._id)?\"Online\":\"Offline\"})]})]},user._id)),filteredUsers.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-zinc-400 py-4\",children:\"No users found\"})]})]});};export default Sidebar;","map":{"version":3,"names":["React","useEffect","useState","useChatStore","SidebarSkeleton","Users","useAuthStore","jsx","_jsx","jsxs","_jsxs","Sidebar","getUsers","users","selectedUser","setSelectedUser","isUsersLoading","onlineUsers","showOnlineOnly","setShowOnlineOnly","filteredUsers","filter","user","includes","_id","className","children","type","checked","onChange","e","target","length","map","onClick","concat","src","profilePicture","alt","name","fullName"],"sources":["/Users/achintiii/chat-app/frontend/src/components/Sidebar.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useChatStore } from \"../store/useChatStore\";\nimport SidebarSkeleton from \"./Skeletons/SidebarSkeleton\";\nimport { Users } from \"lucide-react\";\nimport { useAuthStore } from \"../store/useAuthStore\";\nconst Sidebar = () => {\n  const { getUsers, users, selectedUser, setSelectedUser, isUsersLoading } =\n    useChatStore();\n\n  const { onlineUsers } = useAuthStore();\n  const [showOnlineOnly, setShowOnlineOnly] = useState(false); \n\n  useEffect(() => {\n    getUsers();\n  }, [getUsers]);\n\n  const filteredUsers = showOnlineOnly ? users.filter(user => onlineUsers.includes(user._id)) : users;\n\n  \n\n  if (isUsersLoading) return <SidebarSkeleton />;\n\n  return (\n    <aside className=\"h-full w-20 lg:w-72 border-r border-base-300 flex flex-col transition-all duration-200\">\n      <div className=\"border-b border-base-300 w-full p-5\">\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-6 h-6\" />\n          <span className=\"font-medium hidden lg:block\">Chats</span>\n        </div>\n        <div className=\"mt-3 hidden lg:flex items-center gap-2\">\n          <label className=\"cursor-pointer flex items-center gap-2\">\n            <input\n              type=\"checkbox\"\n              checked={showOnlineOnly}\n              onChange={(e) => setShowOnlineOnly(e.target.checked)}\n              className=\"form-checkbox h-5 w-5 text-base-400\"\n            />\n            <span className=\"text-base-400\">Show online only</span>\n          </label>\n          <span className=\"text-xs text-zinc-500\">({onlineUsers.length - 1} online)</span>\n      </div>\n      </div>\n      <div className=\"overflow-y-auto w-full py-3\">\n        {filteredUsers.map((user) => (\n          <button\n            key={user._id}\n            onClick={() => setSelectedUser(user)}\n            className={`\n                        w-full p-3 flex items-center gap-3 hover:bg-base-300 transition-colors \n                        ${\n                          selectedUser?._id === user._id\n                            ? \"bg-base-300 ring-1 ring-base-300\"\n                            : \"\"\n                        }'}\n                    `}\n          >\n            <div className=\"relative mx-auto lg:mx-0\">\n              <img\n                src={user.profilePicture || \"logo192.png\"}\n                alt={user.name}\n                className=\"size-12 object-cover rounded-full\"\n              />\n              {onlineUsers.includes(user._id) && (\n                <span className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full ring-2 ring-zinc-900\" />\n              )}\n            </div>\n            <div className=\"hidden lg:block text-left min-w-0\">\n              <div className=\"font-medium truncate\">{user.fullName}</div>\n              <div className=\"text-sm text-zinc-400\">\n                {onlineUsers.includes(user._id) ? \"Online\" : \"Offline\"}\n              </div>\n            </div>\n          </button>\n        ))}\n        {filteredUsers.length === 0 && (\n          <div className=\"text-center text-zinc-400 py-4\">\n            No users found\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}