{"ast":null,"code":"import { create } from 'zustand';\nimport toast from 'react-hot-toast';\nimport { axiosInstance } from '../lib/axios';\nexport const useChatStore = create((set, get) => ({\n  messages: [],\n  users: [],\n  selectedUser: null,\n  isUsersLoading: false,\n  isMessagesLoading: false,\n  getUsers: async () => {\n    set({\n      isUsersLoading: true\n    });\n    try {\n      const res = await axiosInstance.get('/messages/users');\n      console.log('Fetched users:', res.data); // Debugging log\n      set({\n        users: res.data\n      }); // Update users\n    } catch (error) {\n      console.error('Error fetching users:', error); // Log error\n      toast.error('Failed to fetch users');\n    } finally {\n      set({\n        isUsersLoading: false\n      });\n    }\n  },\n  getMessages: async userId => {\n    set({\n      isMessagesLoading: true\n    });\n    try {\n      const res = await axiosInstance.get(`/messages/${userId}`);\n      console.log('Fetched messages:', res.data); // Debugging log\n      set({\n        messages: res.data\n      }); // Update messages\n    } catch (error) {\n      console.error('Error fetching messages:', error); // Log error\n      toast.error('Failed to fetch messages');\n    } finally {\n      set({\n        isMessagesLoading: false\n      });\n    }\n  },\n  setSelectedUser: selectedUser => {\n    set({\n      selectedUser\n    });\n  },\n  sendMessage: async messageData => {\n    const {\n      selectedUser,\n      messages\n    } = get();\n    try {\n      const res = await axiosInstance.post(`/messages/send/${selectedUser._id}`, messageData);\n      console.log('Sent message:', res.data); // Debugging log\n      set({\n        messages: [...messages, res.data]\n      }); // Update messages\n    } catch (error) {\n      console.error('Error sending message:', error); // Log error\n      toast.error('Failed to send message');\n    }\n  }\n}));","map":{"version":3,"names":["create","toast","axiosInstance","useChatStore","set","get","messages","users","selectedUser","isUsersLoading","isMessagesLoading","getUsers","res","console","log","data","error","getMessages","userId","setSelectedUser","sendMessage","messageData","post","_id"],"sources":["/Users/achintiii/chat-app/frontend/src/store/useChatStore.js"],"sourcesContent":["import { create } from 'zustand';\nimport toast from 'react-hot-toast';\nimport { axiosInstance } from '../lib/axios';\n\nexport const useChatStore = create((set, get) => ({\n    messages: [], \n    users: [],\n    selectedUser: null,\n    isUsersLoading: false,\n    isMessagesLoading: false,\n\n    getUsers: async () => {\n        set({ isUsersLoading: true });\n        try {\n            const res = await axiosInstance.get('/messages/users');\n            console.log('Fetched users:', res.data); // Debugging log\n            set({ users: res.data }); // Update users\n        } catch (error) {\n            console.error('Error fetching users:', error); // Log error\n            toast.error('Failed to fetch users');\n        } finally {\n            set({ isUsersLoading: false });\n        }\n    },\n\n    getMessages: async (userId) => {\n        set({ isMessagesLoading: true });\n        try {\n            const res = await axiosInstance.get(`/messages/${userId}`);\n            console.log('Fetched messages:', res.data); // Debugging log\n            set({ messages: res.data }); // Update messages\n        } catch (error) {\n            console.error('Error fetching messages:', error); // Log error\n            toast.error('Failed to fetch messages');\n            \n        } finally {\n            set({ isMessagesLoading: false });\n        }\n    },\n\n    setSelectedUser: (selectedUser) => {\n        set({ selectedUser });\n        \n    },\n    sendMessage: async (messageData) => {\n        const {selectedUser, messages} = get();\n        try {\n            const res = await axiosInstance.post(`/messages/send/${selectedUser._id}`, messageData);\n            console.log('Sent message:', res.data); // Debugging log\n            set({ messages: [...messages, res.data] }); // Update messages\n        }\n        catch (error) {\n            console.error('Error sending message:', error); // Log error\n            toast.error('Failed to send message');\n        }\n    },\n\n}));\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAASC,aAAa,QAAQ,cAAc;AAE5C,OAAO,MAAMC,YAAY,GAAGH,MAAM,CAAC,CAACI,GAAG,EAAEC,GAAG,MAAM;EAC9CC,QAAQ,EAAE,EAAE;EACZC,KAAK,EAAE,EAAE;EACTC,YAAY,EAAE,IAAI;EAClBC,cAAc,EAAE,KAAK;EACrBC,iBAAiB,EAAE,KAAK;EAExBC,QAAQ,EAAE,MAAAA,CAAA,KAAY;IAClBP,GAAG,CAAC;MAAEK,cAAc,EAAE;IAAK,CAAC,CAAC;IAC7B,IAAI;MACA,MAAMG,GAAG,GAAG,MAAMV,aAAa,CAACG,GAAG,CAAC,iBAAiB,CAAC;MACtDQ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC;MACzCX,GAAG,CAAC;QAAEG,KAAK,EAAEK,GAAG,CAACG;MAAK,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZH,OAAO,CAACG,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC,CAAC,CAAC;MAC/Cf,KAAK,CAACe,KAAK,CAAC,uBAAuB,CAAC;IACxC,CAAC,SAAS;MACNZ,GAAG,CAAC;QAAEK,cAAc,EAAE;MAAM,CAAC,CAAC;IAClC;EACJ,CAAC;EAEDQ,WAAW,EAAE,MAAOC,MAAM,IAAK;IAC3Bd,GAAG,CAAC;MAAEM,iBAAiB,EAAE;IAAK,CAAC,CAAC;IAChC,IAAI;MACA,MAAME,GAAG,GAAG,MAAMV,aAAa,CAACG,GAAG,CAAC,aAAaa,MAAM,EAAE,CAAC;MAC1DL,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEF,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC;MAC5CX,GAAG,CAAC;QAAEE,QAAQ,EAAEM,GAAG,CAACG;MAAK,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZH,OAAO,CAACG,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC,CAAC,CAAC;MAClDf,KAAK,CAACe,KAAK,CAAC,0BAA0B,CAAC;IAE3C,CAAC,SAAS;MACNZ,GAAG,CAAC;QAAEM,iBAAiB,EAAE;MAAM,CAAC,CAAC;IACrC;EACJ,CAAC;EAEDS,eAAe,EAAGX,YAAY,IAAK;IAC/BJ,GAAG,CAAC;MAAEI;IAAa,CAAC,CAAC;EAEzB,CAAC;EACDY,WAAW,EAAE,MAAOC,WAAW,IAAK;IAChC,MAAM;MAACb,YAAY;MAAEF;IAAQ,CAAC,GAAGD,GAAG,CAAC,CAAC;IACtC,IAAI;MACA,MAAMO,GAAG,GAAG,MAAMV,aAAa,CAACoB,IAAI,CAAC,kBAAkBd,YAAY,CAACe,GAAG,EAAE,EAAEF,WAAW,CAAC;MACvFR,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,GAAG,CAACG,IAAI,CAAC,CAAC,CAAC;MACxCX,GAAG,CAAC;QAAEE,QAAQ,EAAE,CAAC,GAAGA,QAAQ,EAAEM,GAAG,CAACG,IAAI;MAAE,CAAC,CAAC,CAAC,CAAC;IAChD,CAAC,CACD,OAAOC,KAAK,EAAE;MACVH,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC,CAAC,CAAC;MAChDf,KAAK,CAACe,KAAK,CAAC,wBAAwB,CAAC;IACzC;EACJ;AAEJ,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}